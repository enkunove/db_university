# Hotel Booking System

## Функциональные требования

### 1. Управление пользователями
**1.1. Регистрация пользователя**
- Ввод email (таблица: users, тип: varchar(255), ограничения: not null, unique)
- Ввод пароля (таблица: users, тип: varchar(255), ограничения: not null)
- Ввод имени, фамилии (таблица: user_profiles, тип: varchar(100), ограничения: not null)
- Проверка уникальности email
- Проверка возраста (таблица: user_profiles, тип: date, ограничения: check age >= 18)
- Автоматическое создание профиля (связь 1:1 users.profile_id -> user_profiles.id)

**1.2. Аутентификация и авторизация**
- Вход по email и паролю
- Выход из системы

**1.3. Управление профилем**
- Просмотр и редактирование личных данных
- Управление избранными отелями (таблица: user_favorite_hotels, связи: user_id -> users.id, hotel_id -> hotels.id)

### 2. Управление отелями и предложениями
**2.1. Каталог отелей**
- Поиск отелей по городу (таблица: hotels, тип: varchar(100), ограничения: not null)
- Поиск отелей по названию (таблица: hotels, тип: varchar(200), ограничения: not null)
- Фильтрация по звездности (таблица: hotels, тип: integer, ограничения: check 1-5)
- Фильтрация по удобствам (таблица: hotel_amenities, связи: M:M через hotel_amenity_mappings)
- Просмотр фотографий (таблица: hotel_images, связь: hotel_id -> hotels.id)
- Просмотр описаний (таблица: hotels, тип: text)
- Добавление/удаление в избранное (таблица: user_favorite_hotels)

### 3. Процесс бронирования
**3.1. Поиск и выбор**
- Поиск предложений по датам (таблица: offers, типы: date, ограничения: not null, check_out_date > check_in_date)
- Поиск по городу
- Поиск по цене (таблица: offers, тип: decimal(10,2), ограничения: not null, check > 0)
- Фильтрация по типу номера (таблица: offers, тип: varchar(50), ограничения: not null)
- Фильтрация по политике отмены (таблица: offers, тип: varchar(50), ограничения: not null)
- Просмотр деталей предложения

**3.2. Бронирование**
- Расчет общей стоимости (таблица: purchases, тип: decimal(10,2), ограничения: not null, check > 0)
- Подтверждение бронирования
- Генерация номера подтверждения (таблица: purchases, тип: varchar(50), ограничения: not null, unique)

**3.3. Управление бронированиями**
- Просмотр истории бронирований (таблица: purchases, связь: user_id -> users.id)
- Просмотр статусов бронирований (таблица: purchases, тип: varchar(20), ограничения: not null)

### 4. Система оплаты
**4.1. Обработка платежей**
- Выбор способа оплаты (таблица: payments, тип: varchar(30), ограничения: not null)
- Проведение платежа
- Подтверждение оплаты (таблица: payments, тип: varchar(20), ограничения: not null)
- История платежей (таблица: payments, связь: purchase_id -> purchases.id)

**4.2. Возвраты средств**
- Запрос на возврат (таблица: refunds, связь: purchase_id -> purchases.id)
- Указание причины возврата (таблица: refunds, тип: text, ограничения: not null)

### 5. Система отзывов и рейтингов
**5.1. Добавление отзывов**
- Написание отзывов после завершения бронирования
- Оценка отеля (таблица: reviews, тип: integer, ограничения: not null, check 1-5)
- Проверка верификации отзыва (таблица: reviews, тип: boolean, ограничения: default false)

**5.2. Просмотр отзывов**
- Чтение отзывов об отелях (таблица: reviews, связи: user_id -> users.id, hotel_id -> hotels.id)
- Фильтрация по рейтингу
- Отображение верифицированных отзывов

### 6. Управление для интеграторов
**6.1. Управление контрактами**
- Добавление новых отелей в систему (таблица: hotels)

### 7. Администрирование системы
**7.1. Управление пользователями**
- Модерация контента

**7.2. Управление отелями и интеграторами**
- Добавление новых отелей
- Управление каталогом удобств (таблица: hotel_amenities, тип: varchar(100), ограничения: not null, unique)

### 8. Отчетность и аналитика
**8.1. Финансовая отчетность**
- Отчеты по продажам для интеграторов
- Статистика по доходам
- Анализ возвратов

**8.2. Бизнес-аналитика**
- Статистика занятости
- Анализ отзывов и рейтингов

### 9. Технические требования
**9.1. Производительность**
- Быстрый поиск предложений (< 2 сек)
- Обработка бронирований в реальном времени
- Поддержка высоких нагрузок в пиковые периоды

**9.2. Безопасность**
- Шифрование персональных данных
